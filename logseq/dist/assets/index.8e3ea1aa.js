var jn=Object.defineProperty;var ln=Object.getOwnPropertySymbols;var _n=Object.prototype.hasOwnProperty,Cn=Object.prototype.propertyIsEnumerable;var vn=(U,B,K)=>B in U?jn(U,B,{enumerable:!0,configurable:!0,writable:!0,value:K}):U[B]=K,wn=(U,B)=>{for(var K in B||(B={}))_n.call(B,K)&&vn(U,K,B[K]);if(ln)for(var K of ln(B))Cn.call(B,K)&&vn(U,K,B[K]);return U};var xn=(U,B)=>{var K={};for(var rt in U)_n.call(U,rt)&&B.indexOf(rt)<0&&(K[rt]=U[rt]);if(U!=null&&ln)for(var rt of ln(U))B.indexOf(rt)<0&&Cn.call(U,rt)&&(K[rt]=U[rt]);return K};var N=(U,B,K)=>(vn(U,typeof B!="symbol"?B+"":B,K),K);const Ln=function(){const B=document.createElement("link").relList;if(B&&B.supports&&B.supports("modulepreload"))return;for(const V of document.querySelectorAll('link[rel="modulepreload"]'))rt(V);new MutationObserver(V=>{for(const ut of V)if(ut.type==="childList")for(const R of ut.addedNodes)R.tagName==="LINK"&&R.rel==="modulepreload"&&rt(R)}).observe(document,{childList:!0,subtree:!0});function K(V){const ut={};return V.integrity&&(ut.integrity=V.integrity),V.referrerpolicy&&(ut.referrerPolicy=V.referrerpolicy),V.crossorigin==="use-credentials"?ut.credentials="include":V.crossorigin==="anonymous"?ut.credentials="omit":ut.credentials="same-origin",ut}function rt(V){if(V.ep)return;V.ep=!0;const ut=K(V);fetch(V.href,ut)}};Ln();var un=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Sn={exports:{}};/*! For license information please see lsplugin.user.js.LICENSE.txt */(function(U,B){(function(K,rt){U.exports=rt()})(self,function(){return(()=>{var K={227:(R,d,v)=>{var O=v(155);d.formatArgs=function(L){if(L[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+L[0]+(this.useColors?"%c ":" ")+"+"+R.exports.humanize(this.diff),!this.useColors)return;const T="color: "+this.color;L.splice(1,0,T,"color: inherit");let h=0,l=0;L[0].replace(/%[a-zA-Z%]/g,g=>{g!=="%%"&&(h++,g==="%c"&&(l=h))}),L.splice(l,0,T)},d.save=function(L){try{L?d.storage.setItem("debug",L):d.storage.removeItem("debug")}catch{}},d.load=function(){let L;try{L=d.storage.getItem("debug")}catch{}return!L&&O!==void 0&&"env"in O&&(L=O.env.DEBUG),L},d.useColors=function(){return!(typeof window=="undefined"||!window.process||window.process.type!=="renderer"&&!window.process.__nwjs)||(typeof navigator=="undefined"||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},d.storage=function(){try{return localStorage}catch{}}(),d.destroy=(()=>{let L=!1;return()=>{L||(L=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),d.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],d.log=console.debug||console.log||(()=>{}),R.exports=v(447)(d);const{formatters:_}=R.exports;_.j=function(L){try{return JSON.stringify(L)}catch(T){return"[UnexpectedJSONParseError]: "+T.message}}},447:(R,d,v)=>{R.exports=function(O){function _(h){let l,g=null;function m(...E){if(!m.enabled)return;const X=m,H=Number(new Date),D=H-(l||H);X.diff=D,X.prev=l,X.curr=H,l=H,E[0]=_.coerce(E[0]),typeof E[0]!="string"&&E.unshift("%O");let C=0;E[0]=E[0].replace(/%([a-zA-Z%])/g,(F,i)=>{if(F==="%%")return"%";C++;const a=_.formatters[i];if(typeof a=="function"){const f=E[C];F=a.call(X,f),E.splice(C,1),C--}return F}),_.formatArgs.call(X,E),(X.log||_.log).apply(X,E)}return m.namespace=h,m.useColors=_.useColors(),m.color=_.selectColor(h),m.extend=L,m.destroy=_.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>g===null?_.enabled(h):g,set:E=>{g=E}}),typeof _.init=="function"&&_.init(m),m}function L(h,l){const g=_(this.namespace+(l===void 0?":":l)+h);return g.log=this.log,g}function T(h){return h.toString().substring(2,h.toString().length-2).replace(/\.\*\?$/,"*")}return _.debug=_,_.default=_,_.coerce=function(h){return h instanceof Error?h.stack||h.message:h},_.disable=function(){const h=[..._.names.map(T),..._.skips.map(T).map(l=>"-"+l)].join(",");return _.enable(""),h},_.enable=function(h){let l;_.save(h),_.names=[],_.skips=[];const g=(typeof h=="string"?h:"").split(/[\s,]+/),m=g.length;for(l=0;l<m;l++)g[l]&&((h=g[l].replace(/\*/g,".*?"))[0]==="-"?_.skips.push(new RegExp("^"+h.substr(1)+"$")):_.names.push(new RegExp("^"+h+"$")))},_.enabled=function(h){if(h[h.length-1]==="*")return!0;let l,g;for(l=0,g=_.skips.length;l<g;l++)if(_.skips[l].test(h))return!1;for(l=0,g=_.names.length;l<g;l++)if(_.names[l].test(h))return!0;return!1},_.humanize=v(824),_.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(O).forEach(h=>{_[h]=O[h]}),_.names=[],_.skips=[],_.formatters={},_.selectColor=function(h){let l=0;for(let g=0;g<h.length;g++)l=(l<<5)-l+h.charCodeAt(g),l|=0;return _.colors[Math.abs(l)%_.colors.length]},_.enable(_.load()),_}},856:function(R){R.exports=function(){var d=Object.hasOwnProperty,v=Object.setPrototypeOf,O=Object.isFrozen,_=Object.getPrototypeOf,L=Object.getOwnPropertyDescriptor,T=Object.freeze,h=Object.seal,l=Object.create,g=typeof Reflect!="undefined"&&Reflect,m=g.apply,E=g.construct;m||(m=function(M,W,A){return M.apply(W,A)}),T||(T=function(M){return M}),h||(h=function(M){return M}),E||(E=function(M,W){return new(Function.prototype.bind.apply(M,[null].concat(function(A){if(Array.isArray(A)){for(var it=0,st=Array(A.length);it<A.length;it++)st[it]=A[it];return st}return Array.from(A)}(W))))});var X,H=J(Array.prototype.forEach),D=J(Array.prototype.pop),C=J(Array.prototype.push),F=J(String.prototype.toLowerCase),i=J(String.prototype.match),a=J(String.prototype.replace),f=J(String.prototype.indexOf),S=J(String.prototype.trim),P=J(RegExp.prototype.test),Q=(X=TypeError,function(){for(var M=arguments.length,W=Array(M),A=0;A<M;A++)W[A]=arguments[A];return E(X,W)});function J(M){return function(W){for(var A=arguments.length,it=Array(A>1?A-1:0),st=1;st<A;st++)it[st-1]=arguments[st];return m(M,W,it)}}function Z(M,W){v&&v(M,null);for(var A=W.length;A--;){var it=W[A];if(typeof it=="string"){var st=F(it);st!==it&&(O(W)||(W[A]=st),it=st)}M[it]=!0}return M}function pt(M){var W=l(null),A=void 0;for(A in M)m(d,M,[A])&&(W[A]=M[A]);return W}function yt(M,W){for(;M!==null;){var A=L(M,W);if(A){if(A.get)return J(A.get);if(typeof A.value=="function")return J(A.value)}M=_(M)}return function(it){return console.warn("fallback value for",it),null}}var Gt=T(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Bt=T(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),c=T(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),b=T(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),j=T(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),ot=T(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),xt=T(["#text"]),ft=T(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),$=T(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),lt=T(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ht=T(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),bt=h(/\{\{[\s\S]*|[\s\S]*\}\}/gm),Pt=h(/<%[\s\S]*|[\s\S]*%>/gm),jt=h(/^data-[\-\w.\u00B7-\uFFFF]/),mt=h(/^aria-[\-\w]+$/),et=h(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),St=h(/^(?:\w+script|data):/i),Tt=h(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Lt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M};function _t(M){if(Array.isArray(M)){for(var W=0,A=Array(M.length);W<M.length;W++)A[W]=M[W];return A}return Array.from(M)}var Ut=function(){return typeof window=="undefined"?null:window},le=function(M,W){if((M===void 0?"undefined":Lt(M))!=="object"||typeof M.createPolicy!="function")return null;var A=null,it="data-tt-policy-suffix";W.currentScript&&W.currentScript.hasAttribute(it)&&(A=W.currentScript.getAttribute(it));var st="dompurify"+(A?"#"+A:"");try{return M.createPolicy(st,{createHTML:function(Vt){return Vt}})}catch{return console.warn("TrustedTypes policy "+st+" could not be created."),null}};return function M(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ut(),A=function(o){return M(o)};if(A.version="2.3.1",A.removed=[],!W||!W.document||W.document.nodeType!==9)return A.isSupported=!1,A;var it=W.document,st=W.document,Vt=W.DocumentFragment,Me=W.HTMLTemplateElement,re=W.Node,Ge=W.Element,ue=W.NodeFilter,Yt=W.NamedNodeMap,Ne=Yt===void 0?W.NamedNodeMap||W.MozNamedAttrMap:Yt,ze=W.Text,dn=W.Comment,pn=W.DOMParser,ke=W.trustedTypes,Dt=Ge.prototype,Ue=yt(Dt,"cloneNode"),Ae=yt(Dt,"nextSibling"),He=yt(Dt,"childNodes"),de=yt(Dt,"parentNode");if(typeof Me=="function"){var pe=st.createElement("template");pe.content&&pe.content.ownerDocument&&(st=pe.content.ownerDocument)}var Et=le(ke,it),Xe=Et&&Qt?Et.createHTML(""):"",fe=st,he=fe.implementation,fn=fe.createNodeIterator,hn=fe.createDocumentFragment,nt=fe.getElementsByTagName,Be=it.importNode,Jt={};try{Jt=pt(st).documentMode?st.documentMode:{}}catch{}var At={};A.isSupported=typeof de=="function"&&he&&he.createHTMLDocument!==void 0&&Jt!==9;var me=bt,ge=Pt,Pe=jt,Oe=mt,mn=St,Ve=Tt,Fe=et,vt=null,Ye=Z({},[].concat(_t(Gt),_t(Bt),_t(c),_t(j),_t(xt))),Ct=null,De=Z({},[].concat(_t(ft),_t($),_t(lt),_t(ht))),je=null,ye=null,Je=!0,Le=!0,Ke=!1,Ht=!1,Kt=!1,be=!1,Te=!1,$t=!1,ve=!1,$e=!0,Qt=!1,we=!0,Ee=!0,oe=!1,qt={},Xt=null,Re=Z({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ie=null,Qe=Z({},["audio","video","img","source","image","track"]),se=null,qe=Z({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),_e="http://www.w3.org/1998/Math/MathML",Rt="http://www.w3.org/2000/svg",Nt="http://www.w3.org/1999/xhtml",Ce=Nt,xe=!1,te=null,gn=st.createElement("form"),ae=function(o){te&&te===o||(o&&(o===void 0?"undefined":Lt(o))==="object"||(o={}),o=pt(o),vt="ALLOWED_TAGS"in o?Z({},o.ALLOWED_TAGS):Ye,Ct="ALLOWED_ATTR"in o?Z({},o.ALLOWED_ATTR):De,se="ADD_URI_SAFE_ATTR"in o?Z(pt(qe),o.ADD_URI_SAFE_ATTR):qe,ie="ADD_DATA_URI_TAGS"in o?Z(pt(Qe),o.ADD_DATA_URI_TAGS):Qe,Xt="FORBID_CONTENTS"in o?Z({},o.FORBID_CONTENTS):Re,je="FORBID_TAGS"in o?Z({},o.FORBID_TAGS):{},ye="FORBID_ATTR"in o?Z({},o.FORBID_ATTR):{},qt="USE_PROFILES"in o&&o.USE_PROFILES,Je=o.ALLOW_ARIA_ATTR!==!1,Le=o.ALLOW_DATA_ATTR!==!1,Ke=o.ALLOW_UNKNOWN_PROTOCOLS||!1,Ht=o.SAFE_FOR_TEMPLATES||!1,Kt=o.WHOLE_DOCUMENT||!1,$t=o.RETURN_DOM||!1,ve=o.RETURN_DOM_FRAGMENT||!1,$e=o.RETURN_DOM_IMPORT!==!1,Qt=o.RETURN_TRUSTED_TYPE||!1,Te=o.FORCE_BODY||!1,we=o.SANITIZE_DOM!==!1,Ee=o.KEEP_CONTENT!==!1,oe=o.IN_PLACE||!1,Fe=o.ALLOWED_URI_REGEXP||Fe,Ce=o.NAMESPACE||Nt,Ht&&(Le=!1),ve&&($t=!0),qt&&(vt=Z({},[].concat(_t(xt))),Ct=[],qt.html===!0&&(Z(vt,Gt),Z(Ct,ft)),qt.svg===!0&&(Z(vt,Bt),Z(Ct,$),Z(Ct,ht)),qt.svgFilters===!0&&(Z(vt,c),Z(Ct,$),Z(Ct,ht)),qt.mathMl===!0&&(Z(vt,j),Z(Ct,lt),Z(Ct,ht))),o.ADD_TAGS&&(vt===Ye&&(vt=pt(vt)),Z(vt,o.ADD_TAGS)),o.ADD_ATTR&&(Ct===De&&(Ct=pt(Ct)),Z(Ct,o.ADD_ATTR)),o.ADD_URI_SAFE_ATTR&&Z(se,o.ADD_URI_SAFE_ATTR),o.FORBID_CONTENTS&&(Xt===Re&&(Xt=pt(Xt)),Z(Xt,o.FORBID_CONTENTS)),Ee&&(vt["#text"]=!0),Kt&&Z(vt,["html","head","body"]),vt.table&&(Z(vt,["tbody"]),delete je.tbody),T&&T(o),te=o)},tn=Z({},["mi","mo","mn","ms","mtext"]),en=Z({},["foreignobject","desc","title","annotation-xml"]),ee=Z({},Bt);Z(ee,c),Z(ee,b);var Ze=Z({},j);Z(Ze,ot);var yn=function(o){var I=de(o);I&&I.tagName||(I={namespaceURI:Nt,tagName:"template"});var w=F(o.tagName),q=F(I.tagName);if(o.namespaceURI===Rt)return I.namespaceURI===Nt?w==="svg":I.namespaceURI===_e?w==="svg"&&(q==="annotation-xml"||tn[q]):Boolean(ee[w]);if(o.namespaceURI===_e)return I.namespaceURI===Nt?w==="math":I.namespaceURI===Rt?w==="math"&&en[q]:Boolean(Ze[w]);if(o.namespaceURI===Nt){if(I.namespaceURI===Rt&&!en[q]||I.namespaceURI===_e&&!tn[q])return!1;var at=Z({},["title","style","font","a","script"]);return!Ze[w]&&(at[w]||!ee[w])}return!1},Zt=function(o){C(A.removed,{element:o});try{o.parentNode.removeChild(o)}catch{try{o.outerHTML=Xe}catch{o.remove()}}},nn=function(o,I){try{C(A.removed,{attribute:I.getAttributeNode(o),from:I})}catch{C(A.removed,{attribute:null,from:I})}if(I.removeAttribute(o),o==="is"&&!Ct[o])if($t||ve)try{Zt(I)}catch{}else try{I.setAttribute(o,"")}catch{}},Wt=function(o){var I=void 0,w=void 0;if(Te)o="<remove></remove>"+o;else{var q=i(o,/^[\r\n\t ]+/);w=q&&q[0]}var at=Et?Et.createHTML(o):o;if(Ce===Nt)try{I=new pn().parseFromString(at,"text/html")}catch{}if(!I||!I.documentElement){I=he.createDocument(Ce,"template",null);try{I.documentElement.innerHTML=xe?"":at}catch{}}var It=I.body||I.documentElement;return o&&w&&It.insertBefore(st.createTextNode(w),It.childNodes[0]||null),Ce===Nt?nt.call(I,Kt?"html":"body")[0]:Kt?I.documentElement:It},ce=function(o){return fn.call(o.ownerDocument||o,o,ue.SHOW_ELEMENT|ue.SHOW_COMMENT|ue.SHOW_TEXT,null,!1)},rn=function(o){return!(o instanceof ze||o instanceof dn||typeof o.nodeName=="string"&&typeof o.textContent=="string"&&typeof o.removeChild=="function"&&o.attributes instanceof Ne&&typeof o.removeAttribute=="function"&&typeof o.setAttribute=="function"&&typeof o.namespaceURI=="string"&&typeof o.insertBefore=="function")},zt=function(o){return(re===void 0?"undefined":Lt(re))==="object"?o instanceof re:o&&(o===void 0?"undefined":Lt(o))==="object"&&typeof o.nodeType=="number"&&typeof o.nodeName=="string"},Mt=function(o,I,w){At[o]&&H(At[o],function(q){q.call(A,I,w,te)})},on=function(o){var I=void 0;if(Mt("beforeSanitizeElements",o,null),rn(o)||i(o.nodeName,/[\u0080-\uFFFF]/))return Zt(o),!0;var w=F(o.nodeName);if(Mt("uponSanitizeElement",o,{tagName:w,allowedTags:vt}),!zt(o.firstElementChild)&&(!zt(o.content)||!zt(o.content.firstElementChild))&&P(/<[/\w]/g,o.innerHTML)&&P(/<[/\w]/g,o.textContent)||w==="select"&&P(/<template/i,o.innerHTML))return Zt(o),!0;if(!vt[w]||je[w]){if(Ee&&!Xt[w]){var q=de(o)||o.parentNode,at=He(o)||o.childNodes;if(at&&q)for(var It=at.length-1;It>=0;--It)q.insertBefore(Ue(at[It],!0),Ae(o))}return Zt(o),!0}return o instanceof Ge&&!yn(o)?(Zt(o),!0):w!=="noscript"&&w!=="noembed"||!P(/<\/no(script|embed)/i,o.innerHTML)?(Ht&&o.nodeType===3&&(I=o.textContent,I=a(I,me," "),I=a(I,ge," "),o.textContent!==I&&(C(A.removed,{element:o.cloneNode()}),o.textContent=I)),Mt("afterSanitizeElements",o,null),!1):(Zt(o),!0)},sn=function(o,I,w){if(we&&(I==="id"||I==="name")&&(w in st||w in gn))return!1;if(!(Le&&!ye[I]&&P(Pe,I))){if(!(Je&&P(Oe,I))){if(!Ct[I]||ye[I])return!1;if(!se[I]){if(!P(Fe,a(w,Ve,""))){if((I!=="src"&&I!=="xlink:href"&&I!=="href"||o==="script"||f(w,"data:")!==0||!ie[o])&&!(Ke&&!P(mn,a(w,Ve,"")))){if(w)return!1}}}}}return!0},an=function(o){var I=void 0,w=void 0,q=void 0,at=void 0;Mt("beforeSanitizeAttributes",o,null);var It=o.attributes;if(It){var wt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ct};for(at=It.length;at--;){var Se=I=It[at],Ot=Se.name,Ie=Se.namespaceURI;if(w=S(I.value),q=F(Ot),wt.attrName=q,wt.attrValue=w,wt.keepAttr=!0,wt.forceKeepAttr=void 0,Mt("uponSanitizeAttribute",o,wt),w=wt.attrValue,!wt.forceKeepAttr&&(nn(Ot,o),wt.keepAttr))if(P(/\/>/i,w))nn(Ot,o);else{Ht&&(w=a(w,me," "),w=a(w,ge," "));var cn=o.nodeName.toLowerCase();if(sn(cn,q,w))try{Ie?o.setAttributeNS(Ie,Ot,w):o.setAttribute(Ot,w),D(A.removed)}catch{}}}Mt("afterSanitizeAttributes",o,null)}},bn=function o(I){var w=void 0,q=ce(I);for(Mt("beforeSanitizeShadowDOM",I,null);w=q.nextNode();)Mt("uponSanitizeShadowNode",w,null),on(w)||(w.content instanceof Vt&&o(w.content),an(w));Mt("afterSanitizeShadowDOM",I,null)};return A.sanitize=function(o,I){var w=void 0,q=void 0,at=void 0,It=void 0,wt=void 0;if((xe=!o)&&(o="<!-->"),typeof o!="string"&&!zt(o)){if(typeof o.toString!="function")throw Q("toString is not a function");if(typeof(o=o.toString())!="string")throw Q("dirty is not a string, aborting")}if(!A.isSupported){if(Lt(W.toStaticHTML)==="object"||typeof W.toStaticHTML=="function"){if(typeof o=="string")return W.toStaticHTML(o);if(zt(o))return W.toStaticHTML(o.outerHTML)}return o}if(be||ae(I),A.removed=[],typeof o=="string"&&(oe=!1),!oe)if(o instanceof re)(q=(w=Wt("<!---->")).ownerDocument.importNode(o,!0)).nodeType===1&&q.nodeName==="BODY"||q.nodeName==="HTML"?w=q:w.appendChild(q);else{if(!$t&&!Ht&&!Kt&&o.indexOf("<")===-1)return Et&&Qt?Et.createHTML(o):o;if(!(w=Wt(o)))return $t?null:Xe}w&&Te&&Zt(w.firstChild);for(var Se=ce(oe?o:w);at=Se.nextNode();)at.nodeType===3&&at===It||on(at)||(at.content instanceof Vt&&bn(at.content),an(at),It=at);if(It=null,oe)return o;if($t){if(ve)for(wt=hn.call(w.ownerDocument);w.firstChild;)wt.appendChild(w.firstChild);else wt=w;return $e&&(wt=Be.call(it,wt,!0)),wt}var Ot=Kt?w.outerHTML:w.innerHTML;return Ht&&(Ot=a(Ot,me," "),Ot=a(Ot,ge," ")),Et&&Qt?Et.createHTML(Ot):Ot},A.setConfig=function(o){ae(o),be=!0},A.clearConfig=function(){te=null,be=!1},A.isValidAttribute=function(o,I,w){te||ae({});var q=F(o),at=F(I);return sn(q,at,w)},A.addHook=function(o,I){typeof I=="function"&&(At[o]=At[o]||[],C(At[o],I))},A.removeHook=function(o){At[o]&&D(At[o])},A.removeHooks=function(o){At[o]&&(At[o]=[])},A.removeAllHooks=function(){At={}},A}()}()},729:R=>{var d=Object.prototype.hasOwnProperty,v="~";function O(){}function _(l,g,m){this.fn=l,this.context=g,this.once=m||!1}function L(l,g,m,E,X){if(typeof m!="function")throw new TypeError("The listener must be a function");var H=new _(m,E||l,X),D=v?v+g:g;return l._events[D]?l._events[D].fn?l._events[D]=[l._events[D],H]:l._events[D].push(H):(l._events[D]=H,l._eventsCount++),l}function T(l,g){--l._eventsCount==0?l._events=new O:delete l._events[g]}function h(){this._events=new O,this._eventsCount=0}Object.create&&(O.prototype=Object.create(null),new O().__proto__||(v=!1)),h.prototype.eventNames=function(){var l,g,m=[];if(this._eventsCount===0)return m;for(g in l=this._events)d.call(l,g)&&m.push(v?g.slice(1):g);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(l)):m},h.prototype.listeners=function(l){var g=v?v+l:l,m=this._events[g];if(!m)return[];if(m.fn)return[m.fn];for(var E=0,X=m.length,H=new Array(X);E<X;E++)H[E]=m[E].fn;return H},h.prototype.listenerCount=function(l){var g=v?v+l:l,m=this._events[g];return m?m.fn?1:m.length:0},h.prototype.emit=function(l,g,m,E,X,H){var D=v?v+l:l;if(!this._events[D])return!1;var C,F,i=this._events[D],a=arguments.length;if(i.fn){switch(i.once&&this.removeListener(l,i.fn,void 0,!0),a){case 1:return i.fn.call(i.context),!0;case 2:return i.fn.call(i.context,g),!0;case 3:return i.fn.call(i.context,g,m),!0;case 4:return i.fn.call(i.context,g,m,E),!0;case 5:return i.fn.call(i.context,g,m,E,X),!0;case 6:return i.fn.call(i.context,g,m,E,X,H),!0}for(F=1,C=new Array(a-1);F<a;F++)C[F-1]=arguments[F];i.fn.apply(i.context,C)}else{var f,S=i.length;for(F=0;F<S;F++)switch(i[F].once&&this.removeListener(l,i[F].fn,void 0,!0),a){case 1:i[F].fn.call(i[F].context);break;case 2:i[F].fn.call(i[F].context,g);break;case 3:i[F].fn.call(i[F].context,g,m);break;case 4:i[F].fn.call(i[F].context,g,m,E);break;default:if(!C)for(f=1,C=new Array(a-1);f<a;f++)C[f-1]=arguments[f];i[F].fn.apply(i[F].context,C)}}return!0},h.prototype.on=function(l,g,m){return L(this,l,g,m,!1)},h.prototype.once=function(l,g,m){return L(this,l,g,m,!0)},h.prototype.removeListener=function(l,g,m,E){var X=v?v+l:l;if(!this._events[X])return this;if(!g)return T(this,X),this;var H=this._events[X];if(H.fn)H.fn!==g||E&&!H.once||m&&H.context!==m||T(this,X);else{for(var D=0,C=[],F=H.length;D<F;D++)(H[D].fn!==g||E&&!H[D].once||m&&H[D].context!==m)&&C.push(H[D]);C.length?this._events[X]=C.length===1?C[0]:C:T(this,X)}return this},h.prototype.removeAllListeners=function(l){var g;return l?(g=v?v+l:l,this._events[g]&&T(this,g)):(this._events=new O,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=v,h.EventEmitter=h,R.exports=h},717:R=>{typeof Object.create=="function"?R.exports=function(d,v){d.super_=v,d.prototype=Object.create(v.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}})}:R.exports=function(d,v){d.super_=v;var O=function(){};O.prototype=v.prototype,d.prototype=new O,d.prototype.constructor=d}},824:R=>{var d=1e3,v=60*d,O=60*v,_=24*O;function L(T,h,l,g){var m=h>=1.5*l;return Math.round(T/l)+" "+g+(m?"s":"")}R.exports=function(T,h){h=h||{};var l,g,m=typeof T;if(m==="string"&&T.length>0)return function(E){if(!((E=String(E)).length>100)){var X=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(E);if(X){var H=parseFloat(X[1]);switch((X[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*H;case"weeks":case"week":case"w":return 6048e5*H;case"days":case"day":case"d":return H*_;case"hours":case"hour":case"hrs":case"hr":case"h":return H*O;case"minutes":case"minute":case"mins":case"min":case"m":return H*v;case"seconds":case"second":case"secs":case"sec":case"s":return H*d;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return H;default:return}}}}(T);if(m==="number"&&isFinite(T))return h.long?(l=T,(g=Math.abs(l))>=_?L(l,g,_,"day"):g>=O?L(l,g,O,"hour"):g>=v?L(l,g,v,"minute"):g>=d?L(l,g,d,"second"):l+" ms"):function(E){var X=Math.abs(E);return X>=_?Math.round(E/_)+"d":X>=O?Math.round(E/O)+"h":X>=v?Math.round(E/v)+"m":X>=d?Math.round(E/d)+"s":E+"ms"}(T);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(T))}},520:(R,d,v)=>{var O=v(155),_=O.platform==="win32",L=v(539);function T(i,a){for(var f=[],S=0;S<i.length;S++){var P=i[S];P&&P!=="."&&(P===".."?f.length&&f[f.length-1]!==".."?f.pop():a&&f.push(".."):f.push(P))}return f}function h(i){for(var a=i.length-1,f=0;f<=a&&!i[f];f++);for(var S=a;S>=0&&!i[S];S--);return f===0&&S===a?i:f>S?[]:i.slice(f,S+1)}var l=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,g=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,m={};function E(i){var a=l.exec(i),f=(a[1]||"")+(a[2]||""),S=a[3]||"",P=g.exec(S);return[f,P[1],P[2],P[3]]}function X(i){var a=l.exec(i),f=a[1]||"",S=!!f&&f[1]!==":";return{device:f,isUnc:S,isAbsolute:S||!!a[2],tail:a[3]}}function H(i){return"\\\\"+i.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}m.resolve=function(){for(var i="",a="",f=!1,S=arguments.length-1;S>=-1;S--){var P;if(S>=0?P=arguments[S]:i?(P=O.env["="+i])&&P.substr(0,3).toLowerCase()===i.toLowerCase()+"\\"||(P=i+"\\"):P=O.cwd(),!L.isString(P))throw new TypeError("Arguments to path.resolve must be strings");if(P){var Q=X(P),J=Q.device,Z=Q.isUnc,pt=Q.isAbsolute,yt=Q.tail;if((!J||!i||J.toLowerCase()===i.toLowerCase())&&(i||(i=J),f||(a=yt+"\\"+a,f=pt),i&&f))break}}return Z&&(i=H(i)),i+(f?"\\":"")+(a=T(a.split(/[\\\/]+/),!f).join("\\"))||"."},m.normalize=function(i){var a=X(i),f=a.device,S=a.isUnc,P=a.isAbsolute,Q=a.tail,J=/[\\\/]$/.test(Q);return(Q=T(Q.split(/[\\\/]+/),!P).join("\\"))||P||(Q="."),Q&&J&&(Q+="\\"),S&&(f=H(f)),f+(P?"\\":"")+Q},m.isAbsolute=function(i){return X(i).isAbsolute},m.join=function(){for(var i=[],a=0;a<arguments.length;a++){var f=arguments[a];if(!L.isString(f))throw new TypeError("Arguments to path.join must be strings");f&&i.push(f)}var S=i.join("\\");return/^[\\\/]{2}[^\\\/]/.test(i[0])||(S=S.replace(/^[\\\/]{2,}/,"\\")),m.normalize(S)},m.relative=function(i,a){i=m.resolve(i),a=m.resolve(a);for(var f=i.toLowerCase(),S=a.toLowerCase(),P=h(a.split("\\")),Q=h(f.split("\\")),J=h(S.split("\\")),Z=Math.min(Q.length,J.length),pt=Z,yt=0;yt<Z;yt++)if(Q[yt]!==J[yt]){pt=yt;break}if(pt==0)return a;var Gt=[];for(yt=pt;yt<Q.length;yt++)Gt.push("..");return(Gt=Gt.concat(P.slice(pt))).join("\\")},m._makeLong=function(i){if(!L.isString(i))return i;if(!i)return"";var a=m.resolve(i);return/^[a-zA-Z]\:\\/.test(a)?"\\\\?\\"+a:/^\\\\[^?.]/.test(a)?"\\\\?\\UNC\\"+a.substring(2):i},m.dirname=function(i){var a=E(i),f=a[0],S=a[1];return f||S?(S&&(S=S.substr(0,S.length-1)),f+S):"."},m.basename=function(i,a){var f=E(i)[2];return a&&f.substr(-1*a.length)===a&&(f=f.substr(0,f.length-a.length)),f},m.extname=function(i){return E(i)[3]},m.format=function(i){if(!L.isObject(i))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof i);var a=i.root||"";if(!L.isString(a))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof i.root);var f=i.dir,S=i.base||"";return f?f[f.length-1]===m.sep?f+S:f+m.sep+S:S},m.parse=function(i){if(!L.isString(i))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof i);var a=E(i);if(!a||a.length!==4)throw new TypeError("Invalid path '"+i+"'");return{root:a[0],dir:a[0]+a[1].slice(0,-1),base:a[2],ext:a[3],name:a[2].slice(0,a[2].length-a[3].length)}},m.sep="\\",m.delimiter=";";var D=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,C={};function F(i){return D.exec(i).slice(1)}C.resolve=function(){for(var i="",a=!1,f=arguments.length-1;f>=-1&&!a;f--){var S=f>=0?arguments[f]:O.cwd();if(!L.isString(S))throw new TypeError("Arguments to path.resolve must be strings");S&&(i=S+"/"+i,a=S[0]==="/")}return(a?"/":"")+(i=T(i.split("/"),!a).join("/"))||"."},C.normalize=function(i){var a=C.isAbsolute(i),f=i&&i[i.length-1]==="/";return(i=T(i.split("/"),!a).join("/"))||a||(i="."),i&&f&&(i+="/"),(a?"/":"")+i},C.isAbsolute=function(i){return i.charAt(0)==="/"},C.join=function(){for(var i="",a=0;a<arguments.length;a++){var f=arguments[a];if(!L.isString(f))throw new TypeError("Arguments to path.join must be strings");f&&(i+=i?"/"+f:f)}return C.normalize(i)},C.relative=function(i,a){i=C.resolve(i).substr(1),a=C.resolve(a).substr(1);for(var f=h(i.split("/")),S=h(a.split("/")),P=Math.min(f.length,S.length),Q=P,J=0;J<P;J++)if(f[J]!==S[J]){Q=J;break}var Z=[];for(J=Q;J<f.length;J++)Z.push("..");return(Z=Z.concat(S.slice(Q))).join("/")},C._makeLong=function(i){return i},C.dirname=function(i){var a=F(i),f=a[0],S=a[1];return f||S?(S&&(S=S.substr(0,S.length-1)),f+S):"."},C.basename=function(i,a){var f=F(i)[2];return a&&f.substr(-1*a.length)===a&&(f=f.substr(0,f.length-a.length)),f},C.extname=function(i){return F(i)[3]},C.format=function(i){if(!L.isObject(i))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof i);var a=i.root||"";if(!L.isString(a))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof i.root);return(i.dir?i.dir+C.sep:"")+(i.base||"")},C.parse=function(i){if(!L.isString(i))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof i);var a=F(i);if(!a||a.length!==4)throw new TypeError("Invalid path '"+i+"'");return a[1]=a[1]||"",a[2]=a[2]||"",a[3]=a[3]||"",{root:a[0],dir:a[0]+a[1].slice(0,-1),base:a[2],ext:a[3],name:a[2].slice(0,a[2].length-a[3].length)}},C.sep="/",C.delimiter=":",R.exports=_?m:C,R.exports.posix=C,R.exports.win32=m},155:R=>{var d,v,O=R.exports={};function _(){throw new Error("setTimeout has not been defined")}function L(){throw new Error("clearTimeout has not been defined")}function T(C){if(d===setTimeout)return setTimeout(C,0);if((d===_||!d)&&setTimeout)return d=setTimeout,setTimeout(C,0);try{return d(C,0)}catch{try{return d.call(null,C,0)}catch{return d.call(this,C,0)}}}(function(){try{d=typeof setTimeout=="function"?setTimeout:_}catch{d=_}try{v=typeof clearTimeout=="function"?clearTimeout:L}catch{v=L}})();var h,l=[],g=!1,m=-1;function E(){g&&h&&(g=!1,h.length?l=h.concat(l):m=-1,l.length&&X())}function X(){if(!g){var C=T(E);g=!0;for(var F=l.length;F;){for(h=l,l=[];++m<F;)h&&h[m].run();m=-1,F=l.length}h=null,g=!1,function(i){if(v===clearTimeout)return clearTimeout(i);if((v===L||!v)&&clearTimeout)return v=clearTimeout,clearTimeout(i);try{v(i)}catch{try{return v.call(null,i)}catch{return v.call(this,i)}}}(C)}}function H(C,F){this.fun=C,this.array=F}function D(){}O.nextTick=function(C){var F=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)F[i-1]=arguments[i];l.push(new H(C,F)),l.length!==1||g||T(X)},H.prototype.run=function(){this.fun.apply(null,this.array)},O.title="browser",O.browser=!0,O.env={},O.argv=[],O.version="",O.versions={},O.on=D,O.addListener=D,O.once=D,O.off=D,O.removeListener=D,O.removeAllListeners=D,O.emit=D,O.prependListener=D,O.prependOnceListener=D,O.listeners=function(C){return[]},O.binding=function(C){throw new Error("process.binding is not supported")},O.cwd=function(){return"/"},O.chdir=function(C){throw new Error("process.chdir is not supported")},O.umask=function(){return 0}},384:R=>{R.exports=function(d){return d&&typeof d=="object"&&typeof d.copy=="function"&&typeof d.fill=="function"&&typeof d.readUInt8=="function"}},539:(R,d,v)=>{var O=v(155),_=/%[sdj%]/g;d.format=function(c){if(!i(c)){for(var b=[],j=0;j<arguments.length;j++)b.push(h(arguments[j]));return b.join(" ")}j=1;for(var ot=arguments,xt=ot.length,ft=String(c).replace(_,function(lt){if(lt==="%%")return"%";if(j>=xt)return lt;switch(lt){case"%s":return String(ot[j++]);case"%d":return Number(ot[j++]);case"%j":try{return JSON.stringify(ot[j++])}catch{return"[Circular]"}default:return lt}}),$=ot[j];j<xt;$=ot[++j])C($)||!S($)?ft+=" "+$:ft+=" "+h($);return ft},d.deprecate=function(c,b){if(a(v.g.process))return function(){return d.deprecate(c,b).apply(this,arguments)};if(O.noDeprecation===!0)return c;var j=!1;return function(){if(!j){if(O.throwDeprecation)throw new Error(b);O.traceDeprecation?console.trace(b):console.error(b),j=!0}return c.apply(this,arguments)}};var L,T={};function h(c,b){var j={seen:[],stylize:g};return arguments.length>=3&&(j.depth=arguments[2]),arguments.length>=4&&(j.colors=arguments[3]),D(b)?j.showHidden=b:b&&d._extend(j,b),a(j.showHidden)&&(j.showHidden=!1),a(j.depth)&&(j.depth=2),a(j.colors)&&(j.colors=!1),a(j.customInspect)&&(j.customInspect=!0),j.colors&&(j.stylize=l),m(j,c,j.depth)}function l(c,b){var j=h.styles[b];return j?"\x1B["+h.colors[j][0]+"m"+c+"\x1B["+h.colors[j][1]+"m":c}function g(c,b){return c}function m(c,b,j){if(c.customInspect&&b&&J(b.inspect)&&b.inspect!==d.inspect&&(!b.constructor||b.constructor.prototype!==b)){var ot=b.inspect(j,c);return i(ot)||(ot=m(c,ot,j)),ot}var xt=function(mt,et){if(a(et))return mt.stylize("undefined","undefined");if(i(et)){var St="'"+JSON.stringify(et).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return mt.stylize(St,"string")}return F(et)?mt.stylize(""+et,"number"):D(et)?mt.stylize(""+et,"boolean"):C(et)?mt.stylize("null","null"):void 0}(c,b);if(xt)return xt;var ft=Object.keys(b),$=function(mt){var et={};return mt.forEach(function(St,Tt){et[St]=!0}),et}(ft);if(c.showHidden&&(ft=Object.getOwnPropertyNames(b)),Q(b)&&(ft.indexOf("message")>=0||ft.indexOf("description")>=0))return E(b);if(ft.length===0){if(J(b)){var lt=b.name?": "+b.name:"";return c.stylize("[Function"+lt+"]","special")}if(f(b))return c.stylize(RegExp.prototype.toString.call(b),"regexp");if(P(b))return c.stylize(Date.prototype.toString.call(b),"date");if(Q(b))return E(b)}var ht,bt="",Pt=!1,jt=["{","}"];return H(b)&&(Pt=!0,jt=["[","]"]),J(b)&&(bt=" [Function"+(b.name?": "+b.name:"")+"]"),f(b)&&(bt=" "+RegExp.prototype.toString.call(b)),P(b)&&(bt=" "+Date.prototype.toUTCString.call(b)),Q(b)&&(bt=" "+E(b)),ft.length!==0||Pt&&b.length!=0?j<0?f(b)?c.stylize(RegExp.prototype.toString.call(b),"regexp"):c.stylize("[Object]","special"):(c.seen.push(b),ht=Pt?function(mt,et,St,Tt,Lt){for(var _t=[],Ut=0,le=et.length;Ut<le;++Ut)Bt(et,String(Ut))?_t.push(X(mt,et,St,Tt,String(Ut),!0)):_t.push("");return Lt.forEach(function(M){M.match(/^\d+$/)||_t.push(X(mt,et,St,Tt,M,!0))}),_t}(c,b,j,$,ft):ft.map(function(mt){return X(c,b,j,$,mt,Pt)}),c.seen.pop(),function(mt,et,St){return mt.reduce(function(Tt,Lt){return Lt.indexOf(`
`),Tt+Lt.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?St[0]+(et===""?"":et+`
 `)+" "+mt.join(`,
  `)+" "+St[1]:St[0]+et+" "+mt.join(", ")+" "+St[1]}(ht,bt,jt)):jt[0]+bt+jt[1]}function E(c){return"["+Error.prototype.toString.call(c)+"]"}function X(c,b,j,ot,xt,ft){var $,lt,ht;if((ht=Object.getOwnPropertyDescriptor(b,xt)||{value:b[xt]}).get?lt=ht.set?c.stylize("[Getter/Setter]","special"):c.stylize("[Getter]","special"):ht.set&&(lt=c.stylize("[Setter]","special")),Bt(ot,xt)||($="["+xt+"]"),lt||(c.seen.indexOf(ht.value)<0?(lt=C(j)?m(c,ht.value,null):m(c,ht.value,j-1)).indexOf(`
`)>-1&&(lt=ft?lt.split(`
`).map(function(bt){return"  "+bt}).join(`
`).substr(2):`
`+lt.split(`
`).map(function(bt){return"   "+bt}).join(`
`)):lt=c.stylize("[Circular]","special")),a($)){if(ft&&xt.match(/^\d+$/))return lt;($=JSON.stringify(""+xt)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?($=$.substr(1,$.length-2),$=c.stylize($,"name")):($=$.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),$=c.stylize($,"string"))}return $+": "+lt}function H(c){return Array.isArray(c)}function D(c){return typeof c=="boolean"}function C(c){return c===null}function F(c){return typeof c=="number"}function i(c){return typeof c=="string"}function a(c){return c===void 0}function f(c){return S(c)&&Z(c)==="[object RegExp]"}function S(c){return typeof c=="object"&&c!==null}function P(c){return S(c)&&Z(c)==="[object Date]"}function Q(c){return S(c)&&(Z(c)==="[object Error]"||c instanceof Error)}function J(c){return typeof c=="function"}function Z(c){return Object.prototype.toString.call(c)}function pt(c){return c<10?"0"+c.toString(10):c.toString(10)}d.debuglog=function(c){if(a(L)&&(L=O.env.NODE_DEBUG||""),c=c.toUpperCase(),!T[c])if(new RegExp("\\b"+c+"\\b","i").test(L)){var b=O.pid;T[c]=function(){var j=d.format.apply(d,arguments);console.error("%s %d: %s",c,b,j)}}else T[c]=function(){};return T[c]},d.inspect=h,h.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},h.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},d.isArray=H,d.isBoolean=D,d.isNull=C,d.isNullOrUndefined=function(c){return c==null},d.isNumber=F,d.isString=i,d.isSymbol=function(c){return typeof c=="symbol"},d.isUndefined=a,d.isRegExp=f,d.isObject=S,d.isDate=P,d.isError=Q,d.isFunction=J,d.isPrimitive=function(c){return c===null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||typeof c=="symbol"||c===void 0},d.isBuffer=v(384);var yt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Gt(){var c=new Date,b=[pt(c.getHours()),pt(c.getMinutes()),pt(c.getSeconds())].join(":");return[c.getDate(),yt[c.getMonth()],b].join(" ")}function Bt(c,b){return Object.prototype.hasOwnProperty.call(c,b)}d.log=function(){console.log("%s - %s",Gt(),d.format.apply(d,arguments))},d.inherits=v(717),d._extend=function(c,b){if(!b||!S(b))return c;for(var j=Object.keys(b),ot=j.length;ot--;)c[j[ot]]=b[j[ot]];return c}}},rt={};function V(R){var d=rt[R];if(d!==void 0)return d.exports;var v=rt[R]={exports:{}};return K[R].call(v.exports,v,v.exports,V),v.exports}V.n=R=>{var d=R&&R.__esModule?()=>R.default:()=>R;return V.d(d,{a:d}),d},V.d=(R,d)=>{for(var v in d)V.o(d,v)&&!V.o(R,v)&&Object.defineProperty(R,v,{enumerable:!0,get:d[v]})},V.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),V.o=(R,d)=>Object.prototype.hasOwnProperty.call(R,d),V.r=R=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(R,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(R,"__esModule",{value:!0})};var ut={};return(()=>{V.r(ut),V.d(ut,{LSPluginUser:()=>Ie,setupPluginUserInstance:()=>cn});var R=V(520);V(856);const d=function(e,n){return e===n||e!=e&&n!=n},v=function(e,n){for(var t=e.length;t--;)if(d(e[t][0],n))return t;return-1};var O=Array.prototype.splice;function _(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}_.prototype.clear=function(){this.__data__=[],this.size=0},_.prototype.delete=function(e){var n=this.__data__,t=v(n,e);return!(t<0||(t==n.length-1?n.pop():O.call(n,t,1),--this.size,0))},_.prototype.get=function(e){var n=this.__data__,t=v(n,e);return t<0?void 0:n[t][1]},_.prototype.has=function(e){return v(this.__data__,e)>-1},_.prototype.set=function(e,n){var t=this.__data__,r=v(t,e);return r<0?(++this.size,t.push([e,n])):t[r][1]=n,this};const L=_,T=typeof un=="object"&&un&&un.Object===Object&&un;var h=typeof self=="object"&&self&&self.Object===Object&&self;const l=T||h||Function("return this")(),g=l.Symbol;var m=Object.prototype,E=m.hasOwnProperty,X=m.toString,H=g?g.toStringTag:void 0,D=Object.prototype.toString,C=g?g.toStringTag:void 0;const F=function(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":C&&C in Object(e)?function(n){var t=E.call(n,H),r=n[H];try{n[H]=void 0;var s=!0}catch{}var u=X.call(n);return s&&(t?n[H]=r:delete n[H]),u}(e):function(n){return D.call(n)}(e)},i=function(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")},a=function(e){if(!i(e))return!1;var n=F(e);return n=="[object Function]"||n=="[object GeneratorFunction]"||n=="[object AsyncFunction]"||n=="[object Proxy]"},f=l["__core-js_shared__"];var S,P=(S=/[^.]+$/.exec(f&&f.keys&&f.keys.IE_PROTO||""))?"Symbol(src)_1."+S:"",Q=Function.prototype.toString,J=/^\[object .+?Constructor\]$/,Z=Function.prototype,pt=Object.prototype,yt=Z.toString,Gt=pt.hasOwnProperty,Bt=RegExp("^"+yt.call(Gt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const c=function(e){return!(!i(e)||(n=e,P&&P in n))&&(a(e)?Bt:J).test(function(t){if(t!=null){try{return Q.call(t)}catch{}try{return t+""}catch{}}return""}(e));var n},b=function(e,n){var t=function(r,s){return r==null?void 0:r[s]}(e,n);return c(t)?t:void 0},j=b(l,"Map"),ot=b(Object,"create");var xt=Object.prototype.hasOwnProperty,ft=Object.prototype.hasOwnProperty;function $(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}$.prototype.clear=function(){this.__data__=ot?ot(null):{},this.size=0},$.prototype.delete=function(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n},$.prototype.get=function(e){var n=this.__data__;if(ot){var t=n[e];return t==="__lodash_hash_undefined__"?void 0:t}return xt.call(n,e)?n[e]:void 0},$.prototype.has=function(e){var n=this.__data__;return ot?n[e]!==void 0:ft.call(n,e)},$.prototype.set=function(e,n){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=ot&&n===void 0?"__lodash_hash_undefined__":n,this};const lt=$,ht=function(e,n){var t,r,s=e.__data__;return((r=typeof(t=n))=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null)?s[typeof n=="string"?"string":"hash"]:s.map};function bt(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}bt.prototype.clear=function(){this.size=0,this.__data__={hash:new lt,map:new(j||L),string:new lt}},bt.prototype.delete=function(e){var n=ht(this,e).delete(e);return this.size-=n?1:0,n},bt.prototype.get=function(e){return ht(this,e).get(e)},bt.prototype.has=function(e){return ht(this,e).has(e)},bt.prototype.set=function(e,n){var t=ht(this,e),r=t.size;return t.set(e,n),this.size+=t.size==r?0:1,this};const Pt=bt;function jt(e){var n=this.__data__=new L(e);this.size=n.size}jt.prototype.clear=function(){this.__data__=new L,this.size=0},jt.prototype.delete=function(e){var n=this.__data__,t=n.delete(e);return this.size=n.size,t},jt.prototype.get=function(e){return this.__data__.get(e)},jt.prototype.has=function(e){return this.__data__.has(e)},jt.prototype.set=function(e,n){var t=this.__data__;if(t instanceof L){var r=t.__data__;if(!j||r.length<199)return r.push([e,n]),this.size=++t.size,this;t=this.__data__=new Pt(r)}return t.set(e,n),this.size=t.size,this};const mt=jt,et=function(){try{var e=b(Object,"defineProperty");return e({},"",{}),e}catch{}}(),St=function(e,n,t){n=="__proto__"&&et?et(e,n,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[n]=t},Tt=function(e,n,t){(t!==void 0&&!d(e[n],t)||t===void 0&&!(n in e))&&St(e,n,t)},Lt=function(e,n,t){for(var r=-1,s=Object(e),u=t(e),p=u.length;p--;){var y=u[++r];if(n(s[y],y,s)===!1)break}return e};var _t=B&&!B.nodeType&&B,Ut=_t&&!0&&U&&!U.nodeType&&U,le=Ut&&Ut.exports===_t?l.Buffer:void 0,M=le?le.allocUnsafe:void 0;const W=l.Uint8Array,A=function(e,n){var t,r,s=n?(t=e.buffer,r=new t.constructor(t.byteLength),new W(r).set(new W(t)),r):e.buffer;return new e.constructor(s,e.byteOffset,e.length)};var it=Object.create;const st=function(){function e(){}return function(n){if(!i(n))return{};if(it)return it(n);e.prototype=n;var t=new e;return e.prototype=void 0,t}}(),Vt=(Me=Object.getPrototypeOf,re=Object,function(e){return Me(re(e))});var Me,re,Ge=Object.prototype;const ue=function(e){var n=e&&e.constructor;return e===(typeof n=="function"&&n.prototype||Ge)},Yt=function(e){return e!=null&&typeof e=="object"},Ne=function(e){return Yt(e)&&F(e)=="[object Arguments]"};var ze=Object.prototype,dn=ze.hasOwnProperty,pn=ze.propertyIsEnumerable;const ke=Ne(function(){return arguments}())?Ne:function(e){return Yt(e)&&dn.call(e,"callee")&&!pn.call(e,"callee")},Dt=Array.isArray,Ue=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991},Ae=function(e){return e!=null&&Ue(e.length)&&!a(e)};var He=B&&!B.nodeType&&B,de=He&&!0&&U&&!U.nodeType&&U,pe=de&&de.exports===He?l.Buffer:void 0;const Et=(pe?pe.isBuffer:void 0)||function(){return!1};var Xe=Function.prototype,fe=Object.prototype,he=Xe.toString,fn=fe.hasOwnProperty,hn=he.call(Object),nt={};nt["[object Float32Array]"]=nt["[object Float64Array]"]=nt["[object Int8Array]"]=nt["[object Int16Array]"]=nt["[object Int32Array]"]=nt["[object Uint8Array]"]=nt["[object Uint8ClampedArray]"]=nt["[object Uint16Array]"]=nt["[object Uint32Array]"]=!0,nt["[object Arguments]"]=nt["[object Array]"]=nt["[object ArrayBuffer]"]=nt["[object Boolean]"]=nt["[object DataView]"]=nt["[object Date]"]=nt["[object Error]"]=nt["[object Function]"]=nt["[object Map]"]=nt["[object Number]"]=nt["[object Object]"]=nt["[object RegExp]"]=nt["[object Set]"]=nt["[object String]"]=nt["[object WeakMap]"]=!1;var Be=B&&!B.nodeType&&B,Jt=Be&&!0&&U&&!U.nodeType&&U,At=Jt&&Jt.exports===Be&&T.process,me=function(){try{return Jt&&Jt.require&&Jt.require("util").types||At&&At.binding&&At.binding("util")}catch{}}(),ge=me&&me.isTypedArray;const Pe=ge?function(e){return function(n){return e(n)}}(ge):function(e){return Yt(e)&&Ue(e.length)&&!!nt[F(e)]},Oe=function(e,n){if((n!=="constructor"||typeof e[n]!="function")&&n!="__proto__")return e[n]};var mn=Object.prototype.hasOwnProperty;const Ve=function(e,n,t){var r=e[n];mn.call(e,n)&&d(r,t)&&(t!==void 0||n in e)||St(e,n,t)};var Fe=/^(?:0|[1-9]\d*)$/;const vt=function(e,n){var t=typeof e;return!!(n=n==null?9007199254740991:n)&&(t=="number"||t!="symbol"&&Fe.test(e))&&e>-1&&e%1==0&&e<n};var Ye=Object.prototype.hasOwnProperty;const Ct=function(e,n){var t=Dt(e),r=!t&&ke(e),s=!t&&!r&&Et(e),u=!t&&!r&&!s&&Pe(e),p=t||r||s||u,y=p?function(dt,G){for(var z=-1,Y=Array(dt);++z<dt;)Y[z]=G(z);return Y}(e.length,String):[],x=y.length;for(var k in e)!n&&!Ye.call(e,k)||p&&(k=="length"||s&&(k=="offset"||k=="parent")||u&&(k=="buffer"||k=="byteLength"||k=="byteOffset")||vt(k,x))||y.push(k);return y};var De=Object.prototype.hasOwnProperty;const je=function(e){if(!i(e))return function(s){var u=[];if(s!=null)for(var p in Object(s))u.push(p);return u}(e);var n=ue(e),t=[];for(var r in e)(r!="constructor"||!n&&De.call(e,r))&&t.push(r);return t},ye=function(e){return Ae(e)?Ct(e,!0):je(e)},Je=function(e){return function(n,t,r,s){var u=!r;r||(r={});for(var p=-1,y=t.length;++p<y;){var x=t[p],k=s?s(r[x],n[x],x,r,n):void 0;k===void 0&&(k=n[x]),u?St(r,x,k):Ve(r,x,k)}return r}(e,ye(e))},Le=function(e,n,t,r,s,u,p){var y,x=Oe(e,t),k=Oe(n,t),dt=p.get(k);if(dt)Tt(e,t,dt);else{var G=u?u(x,k,t+"",e,n,p):void 0,z=G===void 0;if(z){var Y=Dt(k),tt=!Y&&Et(k),gt=!Y&&!tt&&Pe(k);G=k,Y||tt||gt?Dt(x)?G=x:Yt(y=x)&&Ae(y)?G=function(ct,kt){var Ft=-1,ne=ct.length;for(kt||(kt=Array(ne));++Ft<ne;)kt[Ft]=ct[Ft];return kt}(x):tt?(z=!1,G=function(ct,kt){if(kt)return ct.slice();var Ft=ct.length,ne=M?M(Ft):new ct.constructor(Ft);return ct.copy(ne),ne}(k,!0)):gt?(z=!1,G=A(k,!0)):G=[]:function(ct){if(!Yt(ct)||F(ct)!="[object Object]")return!1;var kt=Vt(ct);if(kt===null)return!0;var Ft=fn.call(kt,"constructor")&&kt.constructor;return typeof Ft=="function"&&Ft instanceof Ft&&he.call(Ft)==hn}(k)||ke(k)?(G=x,ke(x)?G=Je(x):i(x)&&!a(x)||(G=function(ct){return typeof ct.constructor!="function"||ue(ct)?{}:st(Vt(ct))}(k))):z=!1}z&&(p.set(k,G),s(G,k,r,u,p),p.delete(k)),Tt(e,t,G)}},Ke=function e(n,t,r,s,u){n!==t&&Lt(t,function(p,y){if(u||(u=new mt),i(p))Le(n,t,y,r,e,s,u);else{var x=s?s(Oe(n,y),p,y+"",n,t,u):void 0;x===void 0&&(x=p),Tt(n,y,x)}},ye)},Ht=function(e){return e},Kt=function(e,n,t){switch(t.length){case 0:return e.call(n);case 1:return e.call(n,t[0]);case 2:return e.call(n,t[0],t[1]);case 3:return e.call(n,t[0],t[1],t[2])}return e.apply(n,t)};var be=Math.max;const Te=et?function(e,n){return et(e,"toString",{configurable:!0,enumerable:!1,value:(t=n,function(){return t}),writable:!0});var t}:Ht;var $t=Date.now;const ve=function(e){var n=0,t=0;return function(){var r=$t(),s=16-(r-t);if(t=r,s>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}(Te),$e=(Qt=function(e,n,t){Ke(e,n,t)},function(e,n){return ve(function(t,r,s){return r=be(r===void 0?t.length-1:r,0),function(){for(var u=arguments,p=-1,y=be(u.length-r,0),x=Array(y);++p<y;)x[p]=u[r+p];p=-1;for(var k=Array(r+1);++p<r;)k[p]=u[p];return k[r]=s(x),Kt(t,this,k)}}(e,n,Ht),e+"")}(function(e,n){var t=-1,r=n.length,s=r>1?n[r-1]:void 0,u=r>2?n[2]:void 0;for(s=Qt.length>3&&typeof s=="function"?(r--,s):void 0,u&&function(y,x,k){if(!i(k))return!1;var dt=typeof x;return!!(dt=="number"?Ae(k)&&vt(x,k.length):dt=="string"&&x in k)&&d(k[x],y)}(n[0],n[1],u)&&(s=r<3?void 0:s,r=1),e=Object(e);++t<r;){var p=n[t];p&&Qt(e,p,t)}return e}));var Qt,we=function(){return(we=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var s in n=arguments[t])Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s]);return e}).apply(this,arguments)};function Ee(e){return e.toLowerCase()}var oe=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],qt=/[^A-Z0-9]+/gi;function Xt(e,n,t){return n instanceof RegExp?e.replace(n,t):n.reduce(function(r,s){return r.replace(s,t)},e)}const Re=navigator.platform.toLowerCase()==="win32"?R.win32:R.posix,ie=function(e,n){return n===void 0&&(n={}),function(t,r){return r===void 0&&(r={}),function(s,u){u===void 0&&(u={});for(var p=u.splitRegexp,y=p===void 0?oe:p,x=u.stripRegexp,k=x===void 0?qt:x,dt=u.transform,G=dt===void 0?Ee:dt,z=u.delimiter,Y=z===void 0?" ":z,tt=Xt(Xt(s,y,"$1\0$2"),k,"\0"),gt=0,ct=tt.length;tt.charAt(gt)==="\0";)gt++;for(;tt.charAt(ct-1)==="\0";)ct--;return tt.slice(gt,ct).split("\0").map(G).join(Y)}(t,we({delimiter:"."},r))}(e,we({delimiter:"_"},n))},Qe=$e;function se(e,n){let t,r,s=!1;const u=y=>x=>{e&&clearTimeout(e),y(x),s=!0},p=new Promise((y,x)=>{t=u(y),r=u(x),e&&(e=setTimeout(()=>r(new Error(`[deferred timeout] ${n}`)),e))});return{created:Date.now(),setTag:y=>n=y,resolve:t,reject:r,promise:p,get settled(){return s}}}var qe=V(227),_e=V.n(qe);const Rt="application/x-postmate-v1+json";let Nt=0;const Ce={handshake:1,"handshake-reply":1,call:1,emit:1,reply:1,request:1},xe=(e,n)=>!(typeof n=="string"&&e.origin!==n||!e.data||typeof e.data=="object"&&!("postmate"in e.data)||e.data.type!==Rt||!Ce[e.data.postmate]);class te{constructor(n){N(this,"parent");N(this,"frame");N(this,"child");N(this,"events",{});N(this,"childOrigin");N(this,"listener");this.parent=n.parent,this.frame=n.frame,this.child=n.child,this.childOrigin=n.childOrigin,this.listener=t=>{if(!xe(t,this.childOrigin))return!1;const{data:r,name:s}=((t||{}).data||{}).value||{};t.data.postmate==="emit"&&s in this.events&&this.events[s].forEach(u=>{u.call(this,r)})},this.parent.addEventListener("message",this.listener,!1)}get(n){return new Promise(t=>{const r=++Nt,s=u=>{u.data.uid===r&&u.data.postmate==="reply"&&(this.parent.removeEventListener("message",s,!1),t(u.data.value))};this.parent.addEventListener("message",s,!1),this.child.postMessage({postmate:"request",type:Rt,property:n,uid:r},this.childOrigin)})}call(n,t){this.child.postMessage({postmate:"call",type:Rt,property:n,data:t},this.childOrigin)}on(n,t){this.events[n]||(this.events[n]=[]),this.events[n].push(t)}destroy(){window.removeEventListener("message",this.listener,!1),this.frame.parentNode.removeChild(this.frame)}}class gn{constructor(n){N(this,"model");N(this,"parent");N(this,"parentOrigin");N(this,"child");this.model=n.model,this.parent=n.parent,this.parentOrigin=n.parentOrigin,this.child=n.child,this.child.addEventListener("message",t=>{if(!xe(t,this.parentOrigin))return;const{property:r,uid:s,data:u}=t.data;t.data.postmate!=="call"?((p,y)=>{const x=typeof p[y]=="function"?p[y]():p[y];return Promise.resolve(x)})(this.model,r).then(p=>{t.source.postMessage({property:r,postmate:"reply",type:Rt,uid:s,value:p},t.origin)}):r in this.model&&typeof this.model[r]=="function"&&this.model[r](u)})}emit(n,t){this.parent.postMessage({postmate:"emit",type:Rt,value:{name:n,data:t}},this.parentOrigin)}}class ae{constructor(n){N(this,"container");N(this,"parent");N(this,"frame");N(this,"child");N(this,"childOrigin");N(this,"url");N(this,"model");this.container=n.container,this.url=n.url,this.parent=window,this.frame=document.createElement("iframe"),n.id&&(this.frame.id=n.id),n.name&&(this.frame.name=n.name),this.frame.classList.add.apply(this.frame.classList,n.classListArray||[]),this.container.appendChild(this.frame),this.child=this.frame.contentWindow,this.model=n.model||{}}sendHandshake(n){const t=(u=>{const p=document.createElement("a");p.href=u;const y=p.protocol.length>4?p.protocol:window.location.protocol,x=p.host.length?p.port==="80"||p.port==="443"?p.hostname:p.host:window.location.host;return p.origin||`${y}//${x}`})(n=n||this.url);let r,s=0;return new Promise((u,p)=>{const y=k=>!!xe(k,t)&&(k.data.postmate==="handshake-reply"?(clearInterval(r),this.parent.removeEventListener("message",y,!1),this.childOrigin=k.origin,u(new te(this))):p("Failed handshake"));this.parent.addEventListener("message",y,!1);const x=()=>{s++,this.child.postMessage({postmate:"handshake",type:Rt,model:this.model},t),s===5&&clearInterval(r)};this.frame.addEventListener("load",()=>{x(),r=setInterval(x,500)}),this.frame.src=n})}}N(ae,"debug",!1),N(ae,"Model");class tn{constructor(n){N(this,"child");N(this,"model");N(this,"parent");N(this,"parentOrigin");this.child=window,this.model=n,this.parent=this.child.parent}sendHandshakeReply(){return new Promise((n,t)=>{const r=s=>{if(s.data.postmate){if(s.data.postmate==="handshake"){this.child.removeEventListener("message",r,!1),s.source.postMessage({postmate:"handshake-reply",type:Rt},s.origin),this.parentOrigin=s.origin;const u=s.data.model;return u&&Object.keys(u).forEach(p=>{this.model[p]=u[p]}),n(new gn(this))}return t("Handshake Reply Failed")}};this.child.addEventListener("message",r,!1)})}}var en=V(729),ee=V.n(en);const{importHTML:Ze,createSandboxContainer:yn}=window.QSandbox||{};function Zt(e,n){return e.startsWith("http")?fetch(e,n):(e=e.replace("file://",""),new Promise(async(t,r)=>{try{const s=await window.apis.doAction(["readFile",e]);t({text:()=>s})}catch(s){console.error(s),r(s)}}))}class nn extends ee(){constructor(t){super();N(this,"_pluginLocal");N(this,"_frame");N(this,"_root");N(this,"_loaded",!1);N(this,"_unmountFns",[]);this._pluginLocal=t,t._dispose(()=>{this._unmount()})}async load(){const{name:t,entry:r}=this._pluginLocal.options;if(this.loaded||!r)return;const{template:s,execScripts:u}=await Ze(r,{fetch:Zt});this._mount(s,document.body);const p=yn(t,{elementGetter:()=>{var x;return(x=this._root)==null?void 0:x.firstChild}}).instance.proxy;p.__shadow_mode__=!0,p.LSPluginLocal=this._pluginLocal,p.LSPluginShadow=this,p.LSPluginUser=p.logseq=new Ie(this._pluginLocal.toJSON(),this._pluginLocal.caller);const y=await u(p,!0);this._unmountFns.push(y.unmount),this._loaded=!0}_mount(t,r){const s=this._frame=document.createElement("div");s.classList.add("lsp-shadow-sandbox"),s.id=this._pluginLocal.id,this._root=s.attachShadow({mode:"open"}),this._root.innerHTML=`<div>${t}</div>`,r.appendChild(s),this.emit("mounted")}_unmount(){for(const t of this._unmountFns)t&&t.call(null)}destroy(){var t,r;(r=(t=this.frame)==null?void 0:t.parentNode)==null||r.removeChild(this.frame)}get loaded(){return this._loaded}get document(){var t;return(t=this._root)==null?void 0:t.firstChild}get frame(){return this._frame}}const Wt=_e()("LSPlugin:caller"),ce="#await#response#",rn="#lspmsg#error#",zt=e=>`#lspmsg#${e}`;class Mt extends ee(){constructor(t){super();N(this,"_pluginLocal");N(this,"_connected",!1);N(this,"_parent");N(this,"_child");N(this,"_shadow");N(this,"_status");N(this,"_userModel",{});N(this,"_call");N(this,"_callUserModel");N(this,"_debugTag","");this._pluginLocal=t,t&&(this._debugTag=t.debugTag)}async connectToChild(){if(this._connected)return;const{shadow:t}=this._pluginLocal;t?await this._setupShadowSandbox():await this._setupIframeSandbox()}async connectToParent(t={}){var dt;if(this._connected)return;const r=this,s=this._pluginLocal!=null;let u=0;const p=new Map,y=se(5e3),x=this._extendUserModel(wn({"#lspmsg#ready#":async G=>{x[zt(G==null?void 0:G.pid)]=({type:z,payload:Y})=>{Wt(`[host (_call) -> *user] ${this._debugTag}`,z,Y),r.emit(z,Y)},await y.resolve()},"#lspmsg#beforeunload#":async G=>{const z=se(1e4);r.emit("beforeunload",Object.assign({actor:z},G)),await z.promise},"#lspmsg#settings#":async({type:G,payload:z})=>{r.emit("settings:changed",z)},"#lspmsg#":async({ns:G,type:z,payload:Y})=>{Wt(`[host (async) -> *user] ${this._debugTag} ns=${G} type=${z}`,Y),G&&G.startsWith("hook")?r.emit(`${G}:${z}`,Y):r.emit(z,Y)},"#lspmsg#reply#":({_sync:G,result:z})=>{if(Wt(`[sync host -> *user] #${G}`,z),p.has(G)){const Y=p.get(G);Y&&(z!=null&&z.hasOwnProperty(rn)?Y.reject(z[rn]):Y.resolve(z),p.delete(G))}}},t));if(s)return await y.promise,JSON.parse(JSON.stringify((dt=this._pluginLocal)==null?void 0:dt.toJSON()));const k=new tn(x).sendHandshakeReply();return this._status="pending",await k.then(G=>{this._child=G,this._connected=!0,this._call=async(z,Y={},tt)=>{if(tt){const gt=++u;p.set(gt,tt),Y._sync=gt,tt.setTag(`async call #${gt}`),Wt(`async call #${gt}`)}return G.emit(zt(x.baseInfo.id),{type:z,payload:Y}),tt==null?void 0:tt.promise},this._callUserModel=async(z,Y)=>{try{x[z](Y)}catch{Wt(`[model method] #${z} not existed`)}},setInterval(()=>{if(p.size>100)for(const[z,Y]of p)Y.settled&&p.delete(z)},18e5)}).finally(()=>{this._status=void 0}),await y.promise,x.baseInfo}async call(t,r={}){var s;return(s=this._call)==null?void 0:s.call(this,t,r)}async callAsync(t,r={}){var u;const s=se(1e4);return(u=this._call)==null?void 0:u.call(this,t,r,s)}async callUserModel(t,r={}){var s;return(s=this._callUserModel)==null?void 0:s.call(this,t,r)}async _setupIframeSandbox(){var dt;const t=this._pluginLocal,r=t.id,s=`${r}_lsp_main`,u=new URL(t.options.entry);u.searchParams.set("__v__",t.options.version);const p=document.querySelector(`#${s}`);p&&p.parentElement.removeChild(p);const y=document.createElement("div");y.classList.add("lsp-iframe-sandbox-container"),y.id=s,y.dataset.pid=r;try{const G=(dt=await this._pluginLocal._loadLayoutsData())==null?void 0:dt.$$0;if(G){y.dataset.inited_layout="true";const{width:z,height:Y,left:tt,top:gt}=G;Object.assign(y.style,{width:z+"px",height:Y+"px",left:tt+"px",top:gt+"px"})}}catch(G){console.error("[Restore Layout Error]",G)}document.body.appendChild(y);let x,k=new ae({id:r+"_iframe",container:y,url:u.href,classListArray:["lsp-iframe-sandbox"],model:{baseInfo:JSON.parse(JSON.stringify(t.toJSON()))}}).sendHandshake();return this._status="pending",new Promise((G,z)=>{x=setTimeout(()=>{z(new Error("handshake Timeout"))},3e3),k.then(Y=>{this._parent=Y,this._connected=!0,this.emit("connected"),Y.on(zt(t.id),({type:tt,payload:gt})=>{var ct;Wt("[user -> *host] ",tt,gt),(ct=this._pluginLocal)==null||ct.emit(tt,gt||{})}),this._call=async(...tt)=>{await Y.call(zt(t.id),{type:tt[0],payload:Object.assign(tt[1]||{},{$$pid:t.id})})},this._callUserModel=async(tt,gt)=>{if(tt.startsWith(ce))return await Y.get(tt.replace(ce,""));Y.call(tt,gt)},G(null)}).catch(Y=>{z(Y)}).finally(()=>{clearTimeout(x)})}).catch(G=>{throw Wt("[iframe sandbox] error",G),G}).finally(()=>{this._status=void 0})}async _setupShadowSandbox(){const t=this._pluginLocal,r=this._shadow=new nn(t);try{this._status="pending",await r.load(),this._connected=!0,this.emit("connected"),this._call=async(s,u={},p)=>{var y;return p&&(u.actor=p),(y=this._pluginLocal)==null||y.emit(s,Object.assign(u,{$$pid:t.id})),p==null?void 0:p.promise},this._callUserModel=async(...s)=>{let u=s[0];u!=null&&u.startsWith(ce)&&(u=u.replace(ce,""));const p=s[1]||{},y=this._userModel[u];typeof y=="function"&&await y.call(null,p)}}catch(s){throw Wt("[shadow sandbox] error",s),s}finally{this._status=void 0}}_extendUserModel(t){return Object.assign(this._userModel,t)}_getSandboxIframeContainer(){var t;return(t=this._parent)==null?void 0:t.frame.parentNode}_getSandboxShadowContainer(){var t;return(t=this._shadow)==null?void 0:t.frame.parentNode}_getSandboxIframeRoot(){var t;return(t=this._parent)==null?void 0:t.frame}_getSandboxShadowRoot(){var t;return(t=this._shadow)==null?void 0:t.frame}set debugTag(t){this._debugTag=t}async destroy(){let t=null;this._parent&&(t=this._getSandboxIframeContainer(),await this._parent.destroy()),this._shadow&&(t=this._getSandboxShadowContainer(),this._shadow.destroy()),t==null||t.parentNode.removeChild(t)}}class on{constructor(n){N(this,"ctx");this.ctx=n}get ctxId(){return this.ctx.baseInfo.id}setItem(n,t){return this.ctx.caller.callAsync("api:call",{method:"write-plugin-storage-file",args:[this.ctxId,n,t]})}getItem(n){return this.ctx.caller.callAsync("api:call",{method:"read-plugin-storage-file",args:[this.ctxId,n]})}removeItem(n){return this.ctx.caller.call("api:call",{method:"unlink-plugin-storage-file",args:[this.ctxId,n]})}clear(){return this.ctx.caller.call("api:call",{method:"clear-plugin-storage-files",args:[this.ctxId]})}hasItem(n){return this.ctx.caller.callAsync("api:call",{method:"exist-plugin-storage-file",args:[this.ctxId,n]})}}class sn{constructor(n){N(this,"ctx");this.ctx=n}get React(){return this.ensureHostScope().React}get ReactDOM(){return this.ensureHostScope().ReactDOM}get pluginLocal(){return this.ensureHostScope().LSPluginCore.ensurePlugin(this.ctx.baseInfo.id)}invokeExperMethod(n,...t){var s,u;const r=this.ensureHostScope();return n=(s=ie(n))==null?void 0:s.toLowerCase(),(u=r.logseq.api["exper_"+n])==null?void 0:u.apply(r,t)}async loadScripts(...n){(n=n.map(t=>t!=null&&t.startsWith("http")?t:this.ctx.resolveResourceFullUrl(t))).unshift(this.ctx.baseInfo.id),await this.invokeExperMethod("loadScripts",...n)}registerFencedCodeRenderer(n,t){return this.ensureHostScope().logseq.api.exper_register_fenced_code_renderer(this.ctx.baseInfo.id,n,t)}registerExtensionsEnhancer(n,t){const r=this.ensureHostScope();switch(n){case"katex":r.katex&&t(r.katex).catch(console.error)}return r.logseq.api.exper_register_extensions_enhancer(this.ctx.baseInfo.id,n,t)}ensureHostScope(){if(window===top)throw new Error("Can not access host scope!");return top}}const an=Symbol.for("proxy-continue"),bn=_e()("LSPlugin:user");function o(e,n,t){var k;if(typeof t!="function")return!1;const{key:r,label:s,desc:u,palette:p,keybinding:y}=n,x=`SimpleCommandHook${r}${++q}`;this.Editor["on"+x](t),(k=this.caller)==null||k.call("api:call",{method:"register-plugin-simple-command",args:[this.baseInfo.id,[{key:r,label:s,type:e,desc:u,keybinding:y},["editor/hook",x]],p]})}let I=null;const w={async getInfo(e){return I||(I=await this._execCallableAPIAsync("get-app-info")),typeof e=="string"?I[e]:I},registerCommand:o,registerCommandPalette(e,n){const{key:t,label:r,keybinding:s}=e;return o.call(this,"$palette$",{key:t,label:r,palette:!0,keybinding:s},n)},registerCommandShortcut(e,n){const{binding:t}=e,r="$shortcut$",s=r+ie(t);return o.call(this,r,{key:s,palette:!1,keybinding:e},n)},registerUIItem(e,n){var r;const t=this.baseInfo.id;(r=this.caller)==null||r.call("api:call",{method:"register-plugin-ui-item",args:[t,e,n]})},registerPageMenuItem(e,n){if(typeof n!="function")return!1;const t=e+"_"+this.baseInfo.id,r=e;o.call(this,"page-menu-item",{key:t,label:r},n)},setFullScreen(e){const n=(...t)=>this._callWin("setFullScreen",...t);e==="toggle"?this._callWin("isFullScreen").then(t=>{t?n():n(!0)}):e?n(!0):n()}};let q=0;const at={registerSlashCommand(e,n){var t;bn("Register slash command #",this.baseInfo.id,e,n),typeof n=="function"&&(n=[["editor/clear-current-slash",!1],["editor/restore-saved-cursor"],["editor/hook",n]]),n=n.map(r=>{const[s,...u]=r;switch(s){case"editor/hook":let p=u[0],y=()=>{var k;(k=this.caller)==null||k.callUserModel(p)};typeof p=="function"&&(y=p);const x=`SlashCommandHook${s}${++q}`;r[1]=x,this.Editor["on"+x](y)}return r}),(t=this.caller)==null||t.call("api:call",{method:"register-plugin-slash-command",args:[this.baseInfo.id,[e,n]]})},registerBlockContextMenuItem(e,n){if(typeof n!="function")return!1;const t=e+"_"+this.baseInfo.id,r=e;o.call(this,"block-context-menu-item",{key:t,label:r},n)},scrollToBlockInPage(e,n,t){const r="block-content-"+n;t!=null&&t.replaceState?this.App.replaceState("page",{name:e},{anchor:r}):this.App.pushState("page",{name:e},{anchor:r})}},It={onBlockChanged(e,n){const t=this.baseInfo.id,r=`hook:db:${ie(`block:${e}`)}`,s=({block:u,txData:p,txMeta:y})=>{u.uuid===e&&n(u,p,y)};return this.caller.on(r,s),this.App._installPluginHook(t,r),()=>{this.caller.off(r,s),this.App._uninstallPluginHook(t,r)}}},wt={},Se={},Ot={};class Ie extends ee(){constructor(t,r){super();N(this,"_baseInfo");N(this,"_caller");N(this,"_version","0.0.6");N(this,"_debugTag","");N(this,"_settingsSchema");N(this,"_connected",!1);N(this,"_ui",new Map);N(this,"_mFileStorage");N(this,"_mExperiments");N(this,"_beforeunloadCallback");this._baseInfo=t,this._caller=r,r.on("sys:ui:visible",s=>{s!=null&&s.toggle&&this.toggleMainUI()}),r.on("settings:changed",s=>{const u=Object.assign({},this.settings),p=Object.assign(this._baseInfo.settings,s);this.emit("settings:changed",wn({},p),u)}),r.on("beforeunload",async s=>{const x=s,{actor:u}=x,p=xn(x,["actor"]),y=this._beforeunloadCallback;try{y&&await y(p),u==null||u.resolve(null)}catch(k){console.debug(`${r.debugTag} [beforeunload] `,k),u==null||u.reject(k)}})}async ready(t,r){if(!this._connected)try{typeof t=="function"&&(r=t,t={});let s=await this._caller.connectToParent(t);this._connected=!0,s=Qe(this._baseInfo,s),this._settingsSchema&&(s.settings=function(u,p){const y=(p||[]).reduce((x,k)=>("default"in k&&(x[k.key]=k.default),x),{});return Object.assign(y,u)}(s.settings,this._settingsSchema),await this.useSettingsSchema(this._settingsSchema)),s!=null&&s.id&&(this._debugTag=this._caller.debugTag=`#${s.id} [${s.name}]`);try{await this._execCallableAPIAsync("setSDKMetadata",{version:this._version})}catch(u){console.warn(u)}r&&r.call(this,s)}catch(s){console.error(`${this._debugTag} [Ready Error]`,s)}}ensureConnected(){if(!this._connected)throw new Error("not connected")}beforeunload(t){typeof t=="function"&&(this._beforeunloadCallback=t)}provideModel(t){return this.caller._extendUserModel(t),this}provideTheme(t){return this.caller.call("provider:theme",t),this}provideStyle(t){return this.caller.call("provider:style",t),this}provideUI(t){return this.caller.call("provider:ui",t),this}useSettingsSchema(t){return this.connected&&this.caller.call("settings:schema",{schema:t,isSync:!0}),this._settingsSchema=t,this}updateSettings(t){this.caller.call("settings:update",t)}onSettingsChanged(t){const r="settings:changed";return this.on(r,t),()=>this.off(r,t)}showSettingsUI(){this.caller.call("settings:visible:changed",{visible:!0})}hideSettingsUI(){this.caller.call("settings:visible:changed",{visible:!1})}setMainUIAttrs(t){this.caller.call("main-ui:attrs",t)}setMainUIInlineStyle(t){this.caller.call("main-ui:style",t)}hideMainUI(t){const r={key:0,visible:!1,cursor:t==null?void 0:t.restoreEditingCursor};this.caller.call("main-ui:visible",r),this.emit("ui:visible:changed",r),this._ui.set(r.key,r)}showMainUI(t){const r={key:0,visible:!0,autoFocus:t==null?void 0:t.autoFocus};this.caller.call("main-ui:visible",r),this.emit("ui:visible:changed",r),this._ui.set(r.key,r)}toggleMainUI(){const t=this._ui.get(0);t&&t.visible?this.hideMainUI():this.showMainUI()}get version(){return this._version}get isMainUIVisible(){const t=this._ui.get(0);return Boolean(t&&t.visible)}get connected(){return this._connected}get baseInfo(){return this._baseInfo}get settings(){var t;return(t=this.baseInfo)==null?void 0:t.settings}get caller(){return this._caller}resolveResourceFullUrl(t){if(this.ensureConnected(),t)return t=t.replace(/^[.\\/]+/,""),function(r,...s){try{const u=new URL(r);if(!u.origin)throw new Error(null);const p=Re.join(r.substr(u.origin.length),...s);return u.origin+p}catch{return Re.join(r,...s)}}(this._baseInfo.lsr,t)}_makeUserProxy(t,r){const s=this,u=this.caller;return new Proxy(t,{get(p,y,x){const k=p[y];return function(...dt){if(k){const z=k.apply(s,dt.concat(r));if(z!==an)return z}if(r){const z=y.toString().match(/^(once|off|on)/i);if(z!=null){const Y=z[0].toLowerCase(),tt=z.input.slice(Y.length),gt=Y==="off",ct=s.baseInfo.id,kt=`hook:${r}:${ie(tt)}`,Ft=dt[0];u[Y](kt,Ft);const ne=()=>{u.off(kt,Ft),u.listenerCount(kt)||s.App._uninstallPluginHook(ct,kt)};return gt?void ne():(s.App._installPluginHook(ct,kt),ne)}}let G=y;return["git","ui","assets"].includes(r)&&(G=r+"_"+G),u.callAsync("api:call",{tag:r,method:G,args:dt})}}})}_execCallableAPIAsync(t,...r){return this._caller.callAsync("api:call",{method:t,args:r})}_execCallableAPI(t,...r){this._caller.call("api:call",{method:t,args:r})}_callWin(...t){return this._execCallableAPIAsync("_callMainWin",...t)}get App(){return this._makeUserProxy(w,"app")}get Editor(){return this._makeUserProxy(at,"editor")}get DB(){return this._makeUserProxy(It,"db")}get Git(){return this._makeUserProxy(wt,"git")}get UI(){return this._makeUserProxy(Se,"ui")}get Assets(){return this._makeUserProxy(Ot,"assets")}get FileStorage(){let t=this._mFileStorage;return t||(t=this._mFileStorage=new on(this)),t}get Experiments(){let t=this._mExperiments;return t||(t=this._mExperiments=new sn(this)),t}}function cn(e,n){return new Ie(e,n)}if(window.__LSP__HOST__==null){const e=new Mt(null);window.logseq=cn({},e)}})(),ut})()})})(Sn,Sn.exports);var Tn=0;function kn(U,B){var K=B.data;if(!(!Array.isArray(K)||K.length<2)){var rt=K[0],V=K[1],ut=K[2],R=U._callbacks[rt];!R||(delete U._callbacks[rt],R(V,ut))}}function An(U){var B=this;B._worker=U,B._callbacks={},U.addEventListener("message",function(K){kn(B,K)})}An.prototype.postMessage=function(U){var B=this,K=Tn++,rt=[K,U];return new Promise(function(V,ut){if(B._callbacks[K]=function(d,v){if(d)return ut(new Error(d.message));V(v)},typeof B._worker.controller!="undefined"){var R=new MessageChannel;R.port1.onmessage=function(d){kn(B,d)},B._worker.controller.postMessage(rt,[R.port2])}else B._worker.postMessage(rt)})};var En=An;const On="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHUoZSl7cmV0dXJuISFlJiYodHlwZW9mIGU9PSJvYmplY3QifHx0eXBlb2YgZT09ImZ1bmN0aW9uIikmJnR5cGVvZiBlLnRoZW49PSJmdW5jdGlvbiJ9ZnVuY3Rpb24gcChlKXtmdW5jdGlvbiBpKHIsbix0LG8pe2Z1bmN0aW9uIHMoYSl7dHlwZW9mIHNlbGYucG9zdE1lc3NhZ2UhPSJmdW5jdGlvbiI/ci5wb3J0c1swXS5wb3N0TWVzc2FnZShhKTpzZWxmLnBvc3RNZXNzYWdlKGEpfXQ/KHR5cGVvZiBjb25zb2xlIT0idW5kZWZpbmVkIiYmImVycm9yImluIGNvbnNvbGUmJmNvbnNvbGUuZXJyb3IoIldvcmtlciBjYXVnaHQgYW4gZXJyb3I6Iix0KSxzKFtuLHttZXNzYWdlOnQubWVzc2FnZX1dKSk6cyhbbixudWxsLG9dKX1mdW5jdGlvbiB5KHIsbil7dHJ5e3JldHVybntyZXM6cihuKX19Y2F0Y2godCl7cmV0dXJue2Vycjp0fX19ZnVuY3Rpb24gZChyLG4sdCxvKXt2YXIgcz15KG4sbyk7cy5lcnI/aShyLHQscy5lcnIpOnUocy5yZXMpP3MucmVzLnRoZW4oZnVuY3Rpb24oYSl7aShyLHQsbnVsbCxhKX0sZnVuY3Rpb24oYSl7aShyLHQsYSl9KTppKHIsdCxudWxsLHMucmVzKX1mdW5jdGlvbiBfKHIpe3ZhciBuPXIuZGF0YTtpZighKCFBcnJheS5pc0FycmF5KG4pfHxuLmxlbmd0aCE9PTIpKXt2YXIgdD1uWzBdLG89blsxXTt0eXBlb2YgZSE9ImZ1bmN0aW9uIj9pKHIsdCxuZXcgRXJyb3IoIlBsZWFzZSBwYXNzIGEgZnVuY3Rpb24gaW50byByZWdpc3RlcigpLiIpKTpkKHIsZSx0LG8pfX1zZWxmLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLF8pfXZhciBtPXAsbD1gZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhYnNvbHV0ZV9pbXBvcnQKZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBkaXZpc2lvbiwgcHJpbnRfZnVuY3Rpb24sIHVuaWNvZGVfbGl0ZXJhbHMKZnJvbSBqcyBpbXBvcnQgZmV0Y2gKaW1wb3J0IG51bXB5IGFzIG5wCmZyb20gcGF0aGxpYiBpbXBvcnQgUGF0aAppbXBvcnQgemlwZmlsZQpmcm9tIHB5b2RpZGUgaW1wb3J0IHRvX2pzCgpyZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vbmx0ay9ubHRrX2RhdGEvZ2gtcGFnZXMvcGFja2FnZXMvdG9rZW5pemVycy9wdW5rdC56aXAnKQpqc19idWZmZXIgPSBhd2FpdCByZXNwb25zZS5hcnJheUJ1ZmZlcigpCnB5X2J1ZmZlciA9IGpzX2J1ZmZlci50b19weSgpCnN0cmVhbSA9IHB5X2J1ZmZlci50b2J5dGVzKCkKZCA9IFBhdGgoIi9ubHRrX2RhdGEvdG9rZW5pemVycyIpCmQubWtkaXIocGFyZW50cz1UcnVlLCBleGlzdF9vaz1UcnVlKQpQYXRoKCcvbmx0a19kYXRhL3Rva2VuaXplcnMvcHVua3QuemlwJykud3JpdGVfYnl0ZXMoc3RyZWFtKQp6aXBmaWxlLlppcEZpbGUoJy9ubHRrX2RhdGEvdG9rZW5pemVycy9wdW5rdC56aXAnKS5leHRyYWN0YWxsKAogICAgcGF0aD0nL25sdGtfZGF0YS90b2tlbml6ZXJzLycKKQoKaW1wb3J0IG1pY3JvcGlwCmF3YWl0IG1pY3JvcGlwLmluc3RhbGwoZG9jb3B0c191cmwpCmF3YWl0IG1pY3JvcGlwLmluc3RhbGwoYnJlYWRhYmlsaXR5X3VybCkKYXdhaXQgbWljcm9waXAuaW5zdGFsbCgnc3VteScpCgpmcm9tIHN1bXkucGFyc2Vycy5odG1sIGltcG9ydCBIdG1sUGFyc2VyCmZyb20gc3VteS5wYXJzZXJzLnBsYWludGV4dCBpbXBvcnQgUGxhaW50ZXh0UGFyc2VyCmZyb20gc3VteS5ubHAudG9rZW5pemVycyBpbXBvcnQgVG9rZW5pemVyCmZyb20gc3VteS5zdW1tYXJpemVycy5sc2EgaW1wb3J0IExzYVN1bW1hcml6ZXIgYXMgU3VtbWFyaXplcgpmcm9tIHN1bXkubmxwLnN0ZW1tZXJzIGltcG9ydCBTdGVtbWVyCmZyb20gc3VteS51dGlscyBpbXBvcnQgZ2V0X3N0b3Bfd29yZHMKCmRlZiBzdW1tYXJpemUobGFuZ3VhZ2UsIGNvdW50LCB0ZXh0KToKICBwYXJzZXIgPSBQbGFpbnRleHRQYXJzZXIuZnJvbV9zdHJpbmcodGV4dCwgVG9rZW5pemVyKGxhbmd1YWdlKSkKICBzdGVtbWVyID0gU3RlbW1lcihsYW5ndWFnZSkKCiAgc3VtbWFyaXplciA9IFN1bW1hcml6ZXIoc3RlbW1lcikKICBzdW1tYXJpemVyLnN0b3Bfd29yZHMgPSBnZXRfc3RvcF93b3JkcyhsYW5ndWFnZSkKCiAgcmVzdWx0ID0gW10KICBmb3Igc2VudGVuY2UgaW4gc3VtbWFyaXplcihwYXJzZXIuZG9jdW1lbnQsIGNvdW50KToKICAgIHJlc3VsdC5hcHBlbmQoc2VudGVuY2UuX19zdHJfXygpKQogIHJldHVybiB0b19qcyhyZXN1bHQpCgpzdW1tYXJpemVgO2ltcG9ydFNjcmlwdHMoImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9weW9kaWRlL3YwLjIwLjAvZnVsbC9weW9kaWRlLmpzIik7YXN5bmMgZnVuY3Rpb24gZigpe2xldCBlPWF3YWl0IGxvYWRQeW9kaWRlKCk7cmV0dXJuIGF3YWl0IGUubG9hZFBhY2thZ2UoIm5sdGsiKSxhd2FpdCBlLmxvYWRQYWNrYWdlKCJudW1weSIpLGF3YWl0IGUubG9hZFBhY2thZ2UoIm1pY3JvcGlwIiksZS5nbG9iYWxzLnNldCgiZG9jb3B0c191cmwiLCJodHRwczovL3RyYXNoaGFsby5naXRodWIuaW8vd2hlZWxzL2RvY29wdC0wLjYuMi1weTIucHkzLW5vbmUtYW55LndobCIpLGUuZ2xvYmFscy5zZXQoImJyZWFkYWJpbGl0eV91cmwiLCJodHRwczovL3RyYXNoaGFsby5naXRodWIuaW8vd2hlZWxzL2JyZWFkYWJpbGl0eS0wLjEuMjAtcHkyLnB5My1ub25lLWFueS53aGwiKSxlLnJ1blB5dGhvbkFzeW5jKGwpfWNvbnN0IGM9ZigpO20oYXN5bmMgZT0+KGF3YWl0IGMpKGUubGFuZ3VhZ2UsZS5jb3VudCxlLnRleHQpKX0pKCk7Cg==",In=typeof window!="undefined"&&window.Blob&&new Blob([atob(On)],{type:"text/javascript;charset=utf-8"});function Rn(){const U=In&&(window.URL||window.webkitURL).createObjectURL(In);try{return U?new Worker(U,{}):new Worker("data:application/javascript;base64,"+On,{type:"module"})}finally{U&&(window.URL||window.webkitURL).revokeObjectURL(U)}}var Zn=()=>new En(new Rn);const Fn=U=>{logseq.App.showMsg(U.toString(),"error")},Wn=[{key:"language",type:"string",title:"Language to use for summaries",description:"What language do you want to default to when summarizing text?",default:"english"},{key:"numberOfSentences",type:"string",title:"Number of sentences",description:"How many sentences do you want to generate when you summarize content?",default:3}];let We;function Mn(){We=Zn(),logseq.Editor.registerSlashCommand("Summary",async()=>{try{console.log("settings",logseq.settings);const{language:U,numberOfSentences:B}=logseq.settings,{content:K,uuid:rt}=await logseq.Editor.getCurrentBlock(),V=await We.postMessage({language:U,count:B,text:K});await logseq.Editor.updateBlock(rt,V[0]),await logseq.Editor.insertBatchBlock(rt,V.slice(1).map(ut=>({content:ut})),{sibling:!0})}catch(U){Fn(U)}})}logseq.beforeunload(()=>{We&&(We._worker.terminate(),We=null)});logseq.useSettingsSchema(Wn);logseq.ready(Mn).catch(Fn);
